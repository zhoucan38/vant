import{c as J,h as _,q as Q,B as X,l as V,z as j,i as z,U as Y,A as Z}from"./use-translate.c063e05d.js";import{c,t as b,n as h,w as p}from"./with-install.3e872450.js";import{z as ee,D as A,C as g,x as I,e as v,j as y,v as x,A as F,q as te}from"./vue-libs.84e059bd.js";import{H as R}from"./constant.80c6de18.js";import{c as ne}from"./interceptor.897e55bf.js";const[ae,S]=J("stepper"),le=200,ie=600,w=(t,s)=>String(t)===String(s),se={min:c(1),max:c(1/0),name:c(""),step:c(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:b,showMinus:b,showInput:b,longPress:b,allowEmpty:Boolean,modelValue:h,inputWidth:h,buttonSize:h,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:c(1),decimalLength:h};var ue=ee({name:ae,props:se,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:s}){const o=e=>{const{min:n,max:i,allowEmpty:f,decimalLength:l}=t;return f&&e===""||(e=j(String(e),!t.integer),e=e===""?0:+e,e=Number.isNaN(e)?+n:e,e=Math.max(Math.min(+i,e),+n),z(l)&&(e=e.toFixed(+l))),e},k=()=>{var i;const e=(i=t.modelValue)!=null?i:t.defaultValue,n=o(e);return w(n,t.modelValue)||s("update:modelValue",n),n};let u;const N=A(),a=A(k()),d=g(()=>t.disabled||t.disableMinus||a.value<=+t.min),r=g(()=>t.disabled||t.disablePlus||a.value>=+t.max),q=g(()=>({width:_(t.inputWidth),height:_(t.buttonSize)})),C=g(()=>Q(t.buttonSize)),G=()=>{const e=o(a.value);w(e,a.value)||(a.value=e)},B=e=>{t.beforeChange?ne(t.beforeChange,{args:[e],done(){a.value=e}}):a.value=e},P=()=>{if(u==="plus"&&r.value||u==="minus"&&d.value){s("overlimit",u);return}const e=u==="minus"?-t.step:+t.step,n=o(Y(+a.value,e));B(n),s(u)},H=e=>{const n=e.target,{value:i}=n,{decimalLength:f}=t;let l=j(String(i),!t.integer);if(z(f)&&l.includes(".")){const D=l.split(".");l=`${D[0]}.${D[1].slice(0,+f)}`}t.beforeChange?n.value=String(a.value):w(i,l)||(n.value=l);const K=l===String(+l);B(K?+l:l)},O=e=>{var n;t.disableInput?(n=N.value)==null||n.blur():s("focus",e)},U=e=>{const n=e.target,i=o(n.value);n.value=String(i),a.value=i,te(()=>{s("blur",e),Z()})};let T,m;const E=()=>{m=setTimeout(()=>{P(),E()},le)},W=()=>{t.longPress&&(T=!1,clearTimeout(m),m=setTimeout(()=>{T=!0,P(),E()},ie))},L=e=>{t.longPress&&(clearTimeout(m),T&&V(e))},$=e=>{t.disableInput&&V(e)},M=e=>({onClick:n=>{V(n),u=e,P()},onTouchstart:()=>{u=e,W()},onTouchend:L,onTouchcancel:L});return I(()=>[t.max,t.min,t.integer,t.decimalLength],G),I(()=>t.modelValue,e=>{w(e,a.value)||(a.value=o(e))}),I(a,e=>{s("update:modelValue",e),s("change",e,{name:t.name})}),X(()=>t.modelValue),()=>v("div",{role:"group",class:S([t.theme])},[y(v("button",F({type:"button",style:C.value,class:[S("minus",{disabled:d.value}),{[R]:!d.value}],"aria-disabled":d.value||void 0},M("minus")),null),[[x,t.showMinus]]),y(v("input",{ref:N,type:t.integer?"tel":"text",role:"spinbutton",class:S("input"),value:a.value,style:q.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,"aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":a.value,onBlur:U,onInput:H,onFocus:O,onMousedown:$},null),[[x,t.showInput]]),y(v("button",F({type:"button",style:C.value,class:[S("plus",{disabled:r.value}),{[R]:!r.value}],"aria-disabled":r.value||void 0},M("plus")),null),[[x,t.showPlus]])])}});const fe=p(ue);export{fe as S};
