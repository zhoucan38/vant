import{J as Z,K as Se,H as we,c as E,i as V,L as Te,b as Ce,E as ke,M as xe,o as Ie,n as Be,p as Re,N as je,h as J,y as $e,O as Q,G as p,e as Ae,u as Pe}from"./use-translate.55dc92d8.js";import{n as x,t as _,d as F,m as Ne,c as H,u as Oe,w as ee}from"./with-install.c8955fea.js";import{z as M,C,e as h,Q as te,D as j,x as I,N as ze,H as Le,q as $,L as Ee,A as _e,E as He,I as Me,j as De,v as We}from"./vue-libs.b1f02cae.js";import{u as ne}from"./use-id.94af3717.js";import{u as ae}from"./use-expose.07028ce8.js";import{a as Ze,r as Ve}from"./use-route.2e5a4a96.js";import{S as Fe,a as Ke}from"./index.72c42701.js";import{b as qe}from"./constant.80c6de18.js";import{c as Ue}from"./interceptor.58bac5b6.js";import{u as Xe}from"./use-refs.193a18d1.js";import{o as Ye}from"./on-popup-reopen.a7f9dc8b.js";import{S as Ge}from"./index.484db6d1.js";import{B as Je}from"./index.f787d2de.js";function Qe(e,o,i){let v=0;const a=e.scrollLeft,f=i===0?1:Math.round(i*1e3/16);function c(){e.scrollLeft+=(o-a)/f,++v<f&&Z(c)}c()}function pe(e,o,i,v){let a=Se(e);const f=a<o,c=i===0?1:Math.round(i*1e3/16),u=(o-a)/c;function r(){a+=u,(f&&a>o||!f&&a<o)&&(a=o),we(e,a),f&&a<o||!f&&a>o?Z(r):v&&Z(v)}r()}function et(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!te(e)}const[tt,ie]=E("tab");var nt=M({name:tt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:x,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:_},setup(e,{slots:o}){const i=C(()=>{const a={},{type:f,color:c,disabled:u,isActive:r,activeColor:m,inactiveColor:y}=e;c&&f==="card"&&(a.borderColor=c,u||(r?a.backgroundColor=c:a.color=c));const S=r?m:y;return S&&(a.color=S),a}),v=()=>{const a=h("span",{class:ie("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||V(e.badge)&&e.badge!==""?h(Je,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},et(a)?a:{default:()=>[a]}):a};return()=>h("div",{id:e.id,role:"tab",class:[ie([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[v()])}});function at(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!te(e)}const[it,oe]=E("tabs");var ot=M({name:it,props:{count:F(Number),inited:Boolean,animated:Boolean,duration:F(x),swipeable:Boolean,lazyRender:Boolean,currentIndex:F(Number)},emits:["change"],setup(e,{emit:o,slots:i}){const v=j(),a=u=>o("change",u),f=()=>{var r;const u=(r=i.default)==null?void 0:r.call(i);return e.animated||e.swipeable?h(Fe,{ref:v,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},at(u)?u:{default:()=>[u]}):u},c=u=>{const r=v.value;r&&r.state.active!==u&&r.swipeTo(u,{immediate:!e.inited})};return I(()=>e.currentIndex,c),ze(()=>{c(e.currentIndex)}),()=>h("div",{class:oe("content",{animated:e.animated||e.swipeable})},[f()])}});const[le,D]=E("tabs"),lt={type:Ne("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:H(0),duration:H(.3),animated:Boolean,ellipsis:_,swipeable:Boolean,scrollspy:Boolean,offsetTop:H(0),background:String,lazyRender:_,lineWidth:x,lineHeight:x,beforeChange:Function,swipeThreshold:H(5),titleActiveColor:String,titleInactiveColor:String},re=Symbol(le);var rt=M({name:le,props:lt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:i}){let v,a,f;const c=j(),u=j(),r=j(),m=ne(),y=Te(c),[B,S]=Xe(),{children:d,linkChildren:A}=Ce(re),s=Le({inited:!1,position:"",lineStyle:{},currentIndex:-1}),R=C(()=>d.length>e.swipeThreshold||!e.ellipsis||e.shrink),P=C(()=>({borderColor:e.color,background:e.background})),w=(t,n)=>{var l;return(l=t.name)!=null?l:n},q=C(()=>{const t=d[s.currentIndex];if(t)return w(t,s.currentIndex)}),W=C(()=>ke(e.offsetTop)),U=C(()=>e.sticky?W.value+v:0),N=t=>{const n=u.value,l=B.value;if(!R.value||!n||!l||!l[s.currentIndex])return;const b=l[s.currentIndex].$el,g=b.offsetLeft-(n.offsetWidth-b.offsetWidth)/2;Qe(n,g,t?0:+e.duration)},T=()=>{const t=s.inited;$(()=>{const n=B.value;if(!n||!n[s.currentIndex]||e.type!=="line"||je(c.value))return;const l=n[s.currentIndex].$el,{lineWidth:b,lineHeight:g}=e,k=l.offsetLeft+l.offsetWidth/2,L={width:J(b),backgroundColor:e.color,transform:`translateX(${k}px) translateX(-50%)`};if(t&&(L.transitionDuration=`${e.duration}s`),V(g)){const G=J(g);L.height=G,L.borderRadius=G}s.lineStyle=L})},se=t=>{const n=t<s.currentIndex?-1:1;for(;t>=0&&t<d.length;){if(!d[t].disabled)return t;t+=n}},O=t=>{const n=se(t);if(!V(n))return;const l=d[n],b=w(l,n),g=s.currentIndex!==null;s.currentIndex=n,b!==e.active&&(o("update:active",b),g&&o("change",b,l.title))},z=t=>{const n=d.find((b,g)=>w(b,g)===t),l=n?d.indexOf(n):0;O(l)},X=(t=!1)=>{if(e.scrollspy){const n=d[s.currentIndex].$el;if(n&&y.value){const l=Q(n,y.value)-U.value;a=!0,pe(y.value,l,t?0:+e.duration,()=>{a=!1})}}},de=(t,n,l)=>{const{title:b,disabled:g}=d[n],k=w(d[n],n);g?o("disabled",k,b):(Ue(e.beforeChange,{args:[k],done:()=>{O(n),X()}}),o("click",k,b),Ze(t)),o("click-tab",{name:k,title:b,event:l,disabled:g})},ue=t=>{f=t.isFixed,o("scroll",t)},fe=t=>{$(()=>{z(t),X(!0)})},be=()=>{for(let t=0;t<d.length;t++){const{top:n}=p(d[t].$el);if(n>U.value)return t===0?0:t-1}return d.length-1},ve=()=>{if(e.scrollspy&&!a){const t=be();O(t)}},he=()=>d.map((t,n)=>h(nt,_e({id:`${m}-${n}`,ref:S(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:n===s.currentIndex,controls:t.id,scrollable:R.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:l=>de(t,n,l)},Re(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),me=()=>{if(e.type==="line"&&d.length)return h("div",{class:D("line"),style:s.lineStyle},null)},Y=()=>{var l,b;const{type:t,border:n}=e;return h("div",{ref:r,class:[D("wrap"),{[qe]:t==="line"&&n}]},[h("div",{ref:u,role:"tablist",class:D("nav",[t,{shrink:e.shrink,complete:R.value}]),style:P.value,"aria-orientation":"horizontal"},[(l=i["nav-left"])==null?void 0:l.call(i),he(),me(),(b=i["nav-right"])==null?void 0:b.call(i)])])};I([()=>e.color,xe],T),I(()=>e.active,t=>{t!==q.value&&z(t)}),I(()=>d.length,()=>{s.inited&&(z(e.active),T(),$(()=>{N(!0)}))}),I(()=>s.currentIndex,()=>{N(),T(),f&&!e.scrollspy&&$e(Math.ceil(Q(c.value)-W.value))});const ge=()=>{z(e.active),$(()=>{s.inited=!0,r.value&&(v=p(r.value).height),N(!0)})},ye=(t,n)=>o("rendered",t,n);return ae({resize:T,scrollTo:fe}),Ee(T),Ye(T),Ie(ge),Be("scroll",ve,{target:y}),A({id:m,props:e,setLine:T,onRendered:ye,currentName:q,scrollIntoView:N}),()=>{var t;return h("div",{ref:c,class:D([e.type])},[e.sticky?h(Ge,{container:c.value,offsetTop:W.value,onScroll:ue},{default:()=>{var n;return[Y(),(n=i["nav-bottom"])==null?void 0:n.call(i)]}}):[Y(),(t=i["nav-bottom"])==null?void 0:t.call(i)],h(ot,{count:d.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:O},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}}});const ce=Symbol(),xt=()=>He(ce,null),[ct,K]=E("tab"),st=Ae({},Ve,{dot:Boolean,name:x,badge:x,title:String,disabled:Boolean,titleClass:Oe,titleStyle:[String,Object],showZeroBadge:_});var dt=M({name:ct,props:st,setup(e,{slots:o}){const i=ne(),v=j(!1),{parent:a,index:f}=Pe(re);if(!a)return;const c=()=>{var m;return(m=e.name)!=null?m:f.value},u=()=>{v.value=!0,a.props.lazyRender&&$(()=>{a.onRendered(c(),e.title)})},r=C(()=>{const m=c()===a.currentName.value;return m&&!v.value&&u(),m});return I(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),Me(ce,r),()=>{var P;const m=`${a.id}-${f.value}`,{animated:y,swipeable:B,scrollspy:S,lazyRender:d}=a.props;if(!o.default&&!y)return;const A=S||r.value;if(y||B)return h(Ke,{id:i,role:"tabpanel",class:K("panel-wrapper",{inactive:!r.value}),tabindex:r.value?0:-1,"aria-hidden":!r.value,"aria-labelledby":m},{default:()=>{var w;return[h("div",{class:K("panel")},[(w=o.default)==null?void 0:w.call(o)])]}});const R=v.value||S||!d?(P=o.default)==null?void 0:P.call(o):null;return ae({id:i}),De(h("div",{id:i,role:"tabpanel",class:K("panel"),tabindex:A?0:-1,"aria-labelledby":m},[R]),[[We,A]])}}});const It=ee(dt),Bt=ee(rt);export{Bt as T,It as a,xt as u};
