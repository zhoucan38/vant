import{c as H,e as u,p as N,h as F,w as R,d as I}from"./use-translate.55dc92d8.js";import{n as z,u as E,m as U,t as P,w as K}from"./with-install.c8955fea.js";import{m as L,u as M}from"./mount-component.bb4140aa.js";import{e as V,c as W}from"./constant.80c6de18.js";import{c as _}from"./interceptor.58bac5b6.js";import{p as $,a as q,P as G}from"./index.6ac6c56d.js";import{B as p}from"./index.7415a29e.js";import{b as x,a as J}from"./index.744ea45e.js";import{z as Q,H as X,e as o,A as y}from"./vue-libs.b1f02cae.js";const[Y,a,g]=H("dialog"),Z=u({},$,{title:String,theme:String,width:z,message:[String,Function],callback:Function,allowHtml:Boolean,className:E,transition:U("van-dialog-bounce"),messageAlign:String,closeOnPopstate:P,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:P,closeOnClickOverlay:Boolean}),ee=[...q,"transition","closeOnPopstate"];var v=Q({name:Y,props:Z,emits:["confirm","cancel","update:show"],setup(e,{emit:i,slots:l}){const s=X({confirm:!1,cancel:!1}),C=t=>i("update:show",t),h=t=>{var c;C(!1),(c=e.callback)==null||c.call(e,t)},w=t=>()=>{!e.show||(i(t),e.beforeClose?(s[t]=!0,_(e.beforeClose,{args:[t],done(){h(t),s[t]=!1},canceled(){s[t]=!1}})):h(t))},b=w("cancel"),O=w("confirm"),k=()=>{const t=l.title?l.title():e.title;if(t)return o("div",{class:a("header",{isolated:!e.message&&!l.default})},[t])},S=t=>{const{message:c,allowHtml:m,messageAlign:r}=e,d=a("message",{"has-title":t,[r]:r}),B=R(c)?c():c;return m&&typeof B=="string"?o("div",{class:d,innerHTML:B},null):o("div",{class:d},[B])},T=()=>{if(l.default)return o("div",{class:a("content")},[l.default()]);const{title:t,message:c,allowHtml:m}=e;if(c){const r=!!(t||l.title);return o("div",{key:m?1:0,class:a("content",{isolated:!r})},[S(r)])}},j=()=>o("div",{class:[W,a("footer")]},[e.showCancelButton&&o(p,{size:"large",text:e.cancelButtonText||g("cancel"),class:a("cancel"),style:{color:e.cancelButtonColor},loading:s.cancel,onClick:b},null),e.showConfirmButton&&o(p,{size:"large",text:e.confirmButtonText||g("confirm"),class:[a("confirm"),{[V]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:s.confirm,onClick:O},null)]),A=()=>o(J,{class:a("footer")},{default:()=>[e.showCancelButton&&o(x,{type:"warning",text:e.cancelButtonText||g("cancel"),class:a("cancel"),color:e.cancelButtonColor,loading:s.cancel,onClick:b},null),e.showConfirmButton&&o(x,{type:"danger",text:e.confirmButtonText||g("confirm"),class:a("confirm"),color:e.confirmButtonColor,loading:s.confirm,onClick:O},null)]}),D=()=>l.footer?l.footer():e.theme==="round-button"?A():j();return()=>{const{width:t,title:c,theme:m,message:r,className:d}=e;return o(G,y({role:"dialog",class:[a([m]),d],style:{width:F(t)},"aria-labelledby":c||r,"onUpdate:show":C},N(e,ee)),{default:()=>[k(),T(),D()]})}}});let f;function te(){({instance:f}=L({setup(){const{state:i,toggle:l}=M();return()=>o(v,y(i,{"onUpdate:show":l}),null)}}))}function n(e){return I?new Promise((i,l)=>{f||te(),f.open(u({},n.currentOptions,e,{callback:s=>{(s==="confirm"?i:l)(s)}}))}):Promise.resolve()}n.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};n.currentOptions=u({},n.defaultOptions);n.alert=n;n.confirm=e=>n(u({showCancelButton:!0},e));n.close=()=>{f&&f.toggle(!1)};n.setDefaultOptions=e=>{u(n.currentOptions,e)};n.resetDefaultOptions=()=>{n.currentOptions=u({},n.defaultOptions)};n.Component=K(v);n.install=e=>{e.use(n.Component),e.config.globalProperties.$dialog=n};export{n as D};
